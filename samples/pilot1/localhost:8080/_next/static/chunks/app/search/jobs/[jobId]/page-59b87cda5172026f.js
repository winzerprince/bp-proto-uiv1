(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{2152:function(e,s,t){Promise.resolve().then(t.bind(t,3682))},3682:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var a=t(7437),r=t(2265),l=t(7648),i=t(2451),d=t(8736),c=t(9205);let n=(0,c.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=t(3247);let m=(0,c.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=t(8930),h=t(1723),g=t(1671),p=t(9388);function u(e){let{params:s}=e,{jobId:t}=s,[c,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{let e=async()=>{f(!0),await new Promise(e=>setTimeout(e,500));let e={job_id:t,title:"Q4 2025 技術図面解析",status:"completed",workflow_id:"bp-search-workflow-v1",files:[{file_id:"file-001",filename:"assembly_drawing_A001.jpg"},{file_id:"file-002",filename:"parts_list_B002.jpg"},{file_id:"file-003",filename:"technical_spec_C003.jpg"}],created_at:"2025-11-08T12:00:00Z",started_at:"2025-11-08T12:00:05Z",completed_at:"2025-11-08T12:10:15Z",progress:null};h(e),"completed"===e.status&&p([{file_id:"file-001",filename:"assembly_drawing_A001.jpg",pages:[{page_number:1,regions:[{region_id:"region-001",type:"text",text:"M8 x 1.25 - 6H",box:{x:100,y:200,width:150,height:30}},{region_id:"region-002",type:"text",text:"寸法公差: \xb10.1mm",box:{x:100,y:250,width:180,height:30}}]},{page_number:2,regions:[{region_id:"region-003",type:"table",text:"部品表: 項目 1-10",box:{x:50,y:100,width:500,height:300}}]}]},{file_id:"file-002",filename:"parts_list_B002.jpg",pages:[{page_number:1,regions:[{region_id:"region-004",type:"table",text:"ボルト M8 数量: 10",box:{x:80,y:150,width:200,height:40}}]}]},{file_id:"file-003",filename:"technical_spec_C003.jpg",pages:[{page_number:1,regions:[{region_id:"region-005",type:"text",text:"材質: SUS304",box:{x:120,y:180,width:160,height:25}},{region_id:"region-006",type:"text",text:"表面処理: 無電解ニッケルメッキ",box:{x:120,y:210,width:220,height:25}},{region_id:"region-007",type:"figure",text:"断面図 A-A",box:{x:300,y:150,width:250,height:200}}]}]}]),f(!1)};e();let s=setInterval(()=>{((null==c?void 0:c.status)==="pending"||(null==c?void 0:c.status)==="processing")&&e()},5e3);return()=>clearInterval(s)},[t,null==c?void 0:c.status]),u)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})});if(!c)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"ジョブが見つかりません"})})});let j=g.reduce((e,s)=>e+s.pages.reduce((e,s)=>e+s.regions.length,0),0);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.default,{href:"/search",className:"p-2 hover:bg-gray-100 rounded transition-colors",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:c.title||"ジョブ ".concat(c.job_id.slice(0,8))}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["ジョブID: ",c.job_id]})]}),(0,a.jsx)(y,{status:c.status})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ジョブ情報"}),(0,a.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"ワークフローID"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-900 mt-1",children:c.workflow_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"ファイル数"}),(0,a.jsxs)("dd",{className:"text-sm font-medium text-gray-900 mt-1",children:[c.files.length,"ファイル"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"作成日時"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-900 mt-1",children:new Date(c.created_at).toLocaleString("ja-JP")})]}),c.completed_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"完了日時"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-900 mt-1",children:new Date(c.completed_at).toLocaleString("ja-JP")})]}),"completed"===c.status&&j>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"抽出領域数"}),(0,a.jsxs)("dd",{className:"text-sm font-medium text-gray-900 mt-1",children:[j,"領域"]})]})]}),c.progress&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"進捗状況"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[c.progress.percentage,"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-purple-600 transition-all duration-300",style:{width:"".concat(c.progress.percentage,"%")}})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:c.progress.current_step})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["ファイル一覧（",c.files.length,"ファイル）"]}),(0,a.jsx)("div",{className:"space-y-2",children:c.files.map(e=>{let s=g.find(s=>s.file_id===e.file_id),t=s?s.pages.reduce((e,s)=>e+s.regions.length,0):0;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.filename}),"completed"===c.status&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:t>0?"".concat(t,"領域抽出済み"):"処理完了"}),"processing"===c.status&&(0,a.jsx)("p",{className:"text-xs text-amber-600 mt-0.5",children:"処理中..."}),"pending"===c.status&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"待機中"}),"failed"===c.status&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-0.5",children:"処理失敗"})]})]}),"completed"===c.status&&s&&(0,a.jsxs)(l.default,{href:"/search/jobs/".concat(c.job_id,"/files/").concat(e.file_id),className:"px-3 py-1.5 text-sm text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1",children:[(0,a.jsx)(n,{className:"w-4 h-4"}),"表示"]})]},e.file_id)})})]}),"completed"===c.status&&g.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"データセットプレビュー"}),(0,a.jsx)("div",{className:"space-y-4",children:g.slice(0,2).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:e.filename}),(0,a.jsx)("div",{className:"space-y-2",children:e.pages.slice(0,1).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs text-gray-600 mb-2",children:["ページ ",e.page_number," (",e.regions.length,"領域)"]}),(0,a.jsx)("div",{className:"space-y-1",children:e.regions.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2 p-2 bg-gray-50 rounded text-xs",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:e.type}),(0,a.jsx)("span",{className:"text-gray-700 flex-1",children:e.text})]},e.region_id))})]},e.page_number))})]},e.file_id))}),(0,a.jsx)(l.default,{href:"/search/jobs/".concat(c.job_id,"/dataset"),className:"mt-4 block text-center px-4 py-2 border border-purple-600 text-purple-600 rounded-button font-medium hover:bg-purple-50 transition-colors",children:"完全なデータセットを表示"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:["completed"===c.status&&(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"アクション"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(l.default,{href:"/search?job_id=".concat(c.job_id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-button font-medium hover:bg-purple-700 transition-colors w-full",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"データセットを検索"]}),(0,a.jsxs)(l.default,{href:"/search/jobs/".concat(c.job_id,"/dataset"),className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-button font-medium hover:bg-gray-50 transition-colors w-full",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),"データセット編集"]})]})]}),"completed"===c.status&&j>0&&(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"統計情報"}),(0,a.jsxs)("dl",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"総領域数"}),(0,a.jsx)("dd",{className:"text-2xl font-bold text-gray-900 mt-1",children:j})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"ファイル数"}),(0,a.jsx)("dd",{className:"text-2xl font-bold text-gray-900 mt-1",children:g.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm text-gray-600",children:"平均領域数/ファイル"}),(0,a.jsx)("dd",{className:"text-2xl font-bold text-gray-900 mt-1",children:Math.round(j/g.length)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-red-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-red-900 mb-4",children:"危険な操作"}),(0,a.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 py-2 border border-red-300 text-red-700 rounded-button font-medium hover:bg-red-50 transition-colors w-full",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"データセットを削除"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"データセットとすべての解析結果が完全に削除されます"})]})]})]})})]})}function y(e){let{status:s}=e,{label:t,icon:r,class:l}={pending:{label:"待機中",icon:(0,a.jsx)(h.Z,{className:"w-4 h-4"}),class:"bg-gray-100 text-gray-700"},processing:{label:"処理中",icon:(0,a.jsx)(h.Z,{className:"w-4 h-4"}),class:"bg-amber-100 text-amber-700"},completed:{label:"完了",icon:(0,a.jsx)(g.Z,{className:"w-4 h-4"}),class:"bg-green-100 text-green-700"},failed:{label:"失敗",icon:(0,a.jsx)(p.Z,{className:"w-4 h-4"}),class:"bg-red-100 text-red-700"}}[s];return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded ".concat(l),children:[r,(0,a.jsx)("span",{className:"text-sm font-medium",children:t})]})}},2451:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3247:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=2152)}),_N_E=e.O()}]);