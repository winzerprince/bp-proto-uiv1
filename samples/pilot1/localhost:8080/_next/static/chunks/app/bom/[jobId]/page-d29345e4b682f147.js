(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{4835:function(e,i,n){Promise.resolve().then(n.bind(n,8871))},8871:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return g}});var d=n(7437),a=n(7648),c=n(2660),f=n(2735),l=n(7168),o=n(8930),t=n(9397),r=n(2451);let b=(0,n(9205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var s=n(2265);let x={title:"製品A - BOM抽出",status:"completed",created_at:"2024-01-15T10:30:00Z",files:[{file_id:"f1",filename:"drawing_001.pdf",url:"/dummy_files/bom_sample_001.png",hasAiEvidence:!0},{file_id:"f2",filename:"drawing_002.pdf",url:"/dummy_files/bom_sample_002.png",hasAiEvidence:!0},{file_id:"f3",filename:"specification.xlsx",url:"/dummy_files/bom_sample_003.png",hasAiEvidence:!0}],items:[{id:"1",name:{value:"ベアリング",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.83},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.84},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.82},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.84},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.83},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.82},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.83},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.84},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.86},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.89}]}},part_number:{value:"6205-2RS",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.88},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.86},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.88},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.86},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.86},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.84},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.88},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.85},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.84},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.86}]}},quantity:{value:"10",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.85},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.89},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.89},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.85},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.87},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.88},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.85},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.87},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.88},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.84}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.83},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.82},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.84},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.83},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.83},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.84},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.89},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.83},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.82},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.88}]}},source:"AI",user_status:"unconfirmed"},{id:"2",name:{value:"Oリング",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.93},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.99},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.93},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.97},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.95},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.91},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.96},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.95},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.92},{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.92}]}},part_number:{value:"OR-30",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.92},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.98},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.91},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.95},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.95},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.92},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.92},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.92},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.93}]}},quantity:{value:"12",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.9},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.93},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.98},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.98},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.95},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.97},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.97},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.91},{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.97}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.91},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.99},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.94},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.95},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.96},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.97},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.95},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.96}]}},source:"AI",user_status:"unconfirmed"},{id:"3",name:{value:"ボルト M6\xd720",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.91},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.99},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.9},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.99},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.97},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.99},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.98},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.9},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.9},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.93}]}},part_number:{value:"B-M6-20",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.94},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.92},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.99},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.98},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.96},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.93},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.93},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.98}]}},quantity:{value:"12",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.95},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.98},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.97},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.91},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.94},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.97},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.91},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.97},{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.92}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.93},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.96},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.9},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.91},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.95},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.97},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.91},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.96},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.93},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.93},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.98}]}},source:"AI",user_status:"unconfirmed"},{id:"4",name:{value:"ナット M6",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.95},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.97},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.91},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.98},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.96},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.91},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.9},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.95}]}},part_number:{value:"N-M6",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.96},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.93},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.91},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.9},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.98},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.93},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.92},{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.92},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.92}]}},quantity:{value:"12",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.92},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.94},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.92},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.91},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.97},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.93},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.95}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.93},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.97},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.92},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.97},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.97},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.95},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.94}]}},source:"AI",user_status:"unconfirmed"},{id:"5",name:{value:"ワッシャー M6",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.96},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.92},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.9},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.93},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.96},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.93},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.92},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.92},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.92}]}},part_number:{value:"W-M6",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.93},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.94},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.91},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.97},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.93},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.94},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.96},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.92},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.91},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.93},{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.91}]}},quantity:{value:"12",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.93},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.95},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.96},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.93},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.92},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.93},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.91},{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.9}]}},unit:{value:"枚",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.92},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.96},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.93},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.96},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.9},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.9},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.94},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.95}]}},source:"AI",user_status:"unconfirmed"},{id:"6",name:{value:"スプリングピン φ3\xd712",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.94},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.94}]}},part_number:{value:"SP-3-12",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.92},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.91},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.96}]}},quantity:{value:"4",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.96},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.98}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.92},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.92}]}},source:"AI",user_status:"unconfirmed"},{id:"7",name:{value:"カバープレート",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.91},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.97}]}},part_number:{value:"CP-001",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.99}]}},quantity:{value:"2",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.92}]}},unit:{value:"枚",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.98}]}},source:"AI",user_status:"unconfirmed"},{id:"8",name:{value:"シャフト φ10\xd750",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.92}]}},part_number:{value:"SH-10-50",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.92}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.91}]}},source:"AI",user_status:"unconfirmed"},{id:"9",name:{value:"スペーサー",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.91},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.95},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.96},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.96},{file_id:"f2",page:1,bbox:[.1,.35,.3,.38999999999999996],confidence:.9},{file_id:"f3",page:1,bbox:[.1,.4,.3,.44],confidence:.98},{file_id:"f3",page:1,bbox:[.1,.45000000000000007,.3,.49000000000000005],confidence:.9},{file_id:"f3",page:1,bbox:[.1,.5,.3,.54],confidence:.97},{file_id:"f1",page:1,bbox:[.1,.55,.3,.5900000000000001],confidence:.95}]}},part_number:{value:"SPC-5",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.93},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.94},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.92},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.97},{file_id:"f2",page:1,bbox:[.35,.35,.5,.38999999999999996],confidence:.95},{file_id:"f3",page:1,bbox:[.35,.4,.5,.44],confidence:.91},{file_id:"f3",page:1,bbox:[.35,.45000000000000007,.5,.49000000000000005],confidence:.94},{file_id:"f3",page:1,bbox:[.35,.5,.5,.54],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.55,.5,.5900000000000001],confidence:.96}]}},quantity:{value:"10",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.97},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.92},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.94},{file_id:"f2",page:1,bbox:[.55,.35,.62,.38999999999999996],confidence:.96},{file_id:"f3",page:1,bbox:[.55,.4,.62,.44],confidence:.91},{file_id:"f3",page:1,bbox:[.55,.45000000000000007,.62,.49000000000000005],confidence:.91},{file_id:"f3",page:1,bbox:[.55,.5,.62,.54],confidence:.9},{file_id:"f1",page:1,bbox:[.55,.55,.62,.5900000000000001],confidence:.96}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.92},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.95},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.97},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.94},{file_id:"f2",page:1,bbox:[.67,.35,.72,.38999999999999996],confidence:.98},{file_id:"f3",page:1,bbox:[.67,.4,.72,.44],confidence:.99},{file_id:"f3",page:1,bbox:[.67,.45000000000000007,.72,.49000000000000005],confidence:.99},{file_id:"f3",page:1,bbox:[.67,.5,.72,.54],confidence:.94},{file_id:"f1",page:1,bbox:[.67,.55,.72,.5900000000000001],confidence:.91}]}},source:"AI",user_status:"unconfirmed"},{id:"10",name:{value:"ハウジング",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.92}]}},part_number:{value:"HS-A01",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.93}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.95}]}},source:"AI",user_status:"unconfirmed"},{id:"11",name:{value:"ギア 20T",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.93},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.91}]}},part_number:{value:"GR-20T",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.99}]}},quantity:{value:"2",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.94}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.9}]}},source:"AI",user_status:"unconfirmed"},{id:"12",name:{value:"プーリー",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.85}]}},part_number:{value:"PL-D30",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.85}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.85}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.83}]}},source:"AI",user_status:"unconfirmed"},{id:"13",name:{value:"ベルト",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.93}]}},part_number:{value:"BT-500",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.9}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.97}]}},source:"AI",user_status:"unconfirmed"},{id:"14",name:{value:"ブッシング",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.94},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.93},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.97}]}},part_number:{value:"BS-10",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.99},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.98},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.96}]}},quantity:{value:"4",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.9},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.96},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.94}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.91},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.93},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.9},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.97}]}},source:"AI",user_status:"unconfirmed"},{id:"15",name:{value:"ストッパー",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.97},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.93}]}},part_number:{value:"ST-A",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.98}]}},quantity:{value:"2",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.96}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.92},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.97}]}},source:"AI",user_status:"unconfirmed"},{id:"16",name:{value:"コネクタ 4P",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.94},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.91}]}},part_number:{value:"CN-4P",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.96}]}},quantity:{value:"2",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.95}]}},unit:{value:"個",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.97}]}},source:"AI",user_status:"unconfirmed"},{id:"17",name:{value:"ケーブル 500mm",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.98},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.94},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.99},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.99},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.91}]}},part_number:{value:"CB-500",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.95},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.97},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.9},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.92},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.92}]}},quantity:{value:"5",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.92},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.94},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.99},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.93},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.96}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.99},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.9}]}},source:"AI",user_status:"unconfirmed"},{id:"18",name:{value:"グリス",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.96}]}},part_number:{value:"GR-001",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.98}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.97}]}},unit:{value:"本",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.95}]}},source:"AI",user_status:"unconfirmed"},{id:"19",name:{value:"ラベル",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.91},{file_id:"f1",page:1,bbox:[.1,.15000000000000002,.3,.19000000000000003],confidence:.91},{file_id:"f1",page:1,bbox:[.1,.2,.3,.24000000000000002],confidence:.95},{file_id:"f2",page:1,bbox:[.1,.25,.3,.29],confidence:.98},{file_id:"f2",page:1,bbox:[.1,.30000000000000004,.3,.34],confidence:.96}]}},part_number:{value:"LB-001",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.35,.15000000000000002,.5,.19000000000000003],confidence:.95},{file_id:"f1",page:1,bbox:[.35,.2,.5,.24000000000000002],confidence:.99},{file_id:"f2",page:1,bbox:[.35,.25,.5,.29],confidence:.93},{file_id:"f2",page:1,bbox:[.35,.30000000000000004,.5,.34],confidence:.94}]}},quantity:{value:"5",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.96},{file_id:"f1",page:1,bbox:[.55,.15000000000000002,.62,.19000000000000003],confidence:.95},{file_id:"f1",page:1,bbox:[.55,.2,.62,.24000000000000002],confidence:.97},{file_id:"f2",page:1,bbox:[.55,.25,.62,.29],confidence:.96},{file_id:"f2",page:1,bbox:[.55,.30000000000000004,.62,.34],confidence:.96}]}},unit:{value:"枚",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.99},{file_id:"f1",page:1,bbox:[.67,.15000000000000002,.72,.19000000000000003],confidence:.97},{file_id:"f1",page:1,bbox:[.67,.2,.72,.24000000000000002],confidence:.92},{file_id:"f2",page:1,bbox:[.67,.25,.72,.29],confidence:.95},{file_id:"f2",page:1,bbox:[.67,.30000000000000004,.72,.34],confidence:.98}]}},source:"AI",user_status:"unconfirmed"},{id:"20",name:{value:"取扱説明書",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.1,.1,.3,.14],confidence:.92}]}},part_number:{value:"MN-001",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.35,.1,.5,.14],confidence:.95}]}},quantity:{value:"1",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.55,.1,.62,.14],confidence:.95}]}},unit:{value:"部",evidence:{related_areas:[{file_id:"f1",page:1,bbox:[.67,.1,.72,.14],confidence:.94}]}},source:"AI",user_status:"unconfirmed"}]};function g(e){var i,n,g;let{params:u}=e,[p,_]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[v,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(""),[w,k]=(0,s.useState)(x.items),[C,q]=(0,s.useState)(0),[S,M]=(0,s.useState)(0),[A,I]=(0,s.useState)(!1),[D,R]=(0,s.useState)({name:"",part_number:"",quantity:"",unit:"個",evidence:{name:[],part_number:[],quantity:[],unit:[]}}),[Z,E]=(0,s.useState)("add"),[B,P]=(0,s.useState)(null),[F,H]=(0,s.useState)(!1),[L,O]=(0,s.useState)(!1),[T,W]=(0,s.useState)(!1),X=(0,s.useRef)(null),Y=(0,s.useRef)(null),[z,V]=(0,s.useState)({width:0,height:0}),[G,U]=(0,s.useState)(!1),[J,K]=(0,s.useState)(null),[Q,$]=(0,s.useState)(!1),[ee,ei]=(0,s.useState)(0),[en,ed]=(0,s.useState)(null),ea=(0,s.useRef)(null),ec=(0,s.useRef)(null),[ef,el]=(0,s.useState)("add"),[eo,et]=(0,s.useState)(null),[er,eb]=(0,s.useState)(90),es={draft:{label:"下書き",class:"bg-gray-100 text-gray-700"},pending:{label:"待機中",class:"bg-blue-100 text-blue-700"},processing:{label:"処理中",class:"bg-amber-100 text-amber-700"},completed:{label:"完了",class:"bg-green-100 text-green-700"},failed:{label:"失敗",class:"bg-red-100 text-red-700"}},ex={unconfirmed:{label:"未確認",class:"bg-gray-100 text-gray-600"},confirmed:{label:"確認済み",class:"bg-green-100 text-green-700"},needs_correction:{label:"要修正",class:"bg-amber-100 text-amber-700"},rejected:{label:"却下",class:"bg-red-100 text-red-700"}},eg=x.files[C],eu=()=>{var e;if(!p||!m)return[];let i=w.find(e=>e.id===p);if(!i)return[];let n=i[m],d=(null==n?void 0:null===(e=n.evidence)||void 0===e?void 0:e.related_areas)||[];return console.log("getAllEvidenceAreas:",p,m,"areas:",d.length),d},ep=eu(),e_=ep[S];(0,s.useEffect)(()=>{console.log("Current evidence index:",S,"/",ep.length,"File:",null==eg?void 0:eg.filename)},[S,ep.length,eg]),(0,s.useEffect)(()=>{if(!X.current||!Y.current||!p||!m)return;let e=Y.current,i=e.getContext("2d");if(!i)return;let n=X.current;e.width=n.naturalWidth,e.height=n.naturalHeight,V({width:n.clientWidth,height:n.clientHeight}),i.clearRect(0,0,e.width,e.height);let d=ep.filter(e=>e.file_id===eg.file_id);console.log("Drawing boxes:",d.length,"on file:",eg.filename),0!==d.length&&d.forEach((n,d)=>{let[a,c,f,l]=n.bbox,o=a*e.width,t=c*e.height,r=f*e.width,b=l*e.height,s=ep.indexOf(n),x=s===S,g=s===eo,u="#10B981",p="rgba(16, 185, 129, 0.15)",_=3;x?(u="#3B82F6",p="rgba(59, 130, 246, 0.25)",_=5):g&&(u="#F59E0B",p="rgba(245, 158, 11, 0.2)",_=4),i.strokeStyle=u,i.lineWidth=_,i.strokeRect(o,t,r-o,b-t),i.fillStyle=p,i.fillRect(o,t,r-o,b-t),i.fillStyle=u,i.font="bold 24px sans-serif",i.fillText((s+1).toString(),o+10,t+30)})},[p,m,w,C,eg,ep,S,eo]);let em=(e,i,n)=>{k(w.map(d=>d.id===e?{...d,[i]:{...d[i],value:n}}:d))},eh=(e,i)=>{var n;h(e),H(!1),M(0);let d=w.find(e=>e.id===i);if(!d)return;let a=d[e];if((null==a?void 0:null===(n=a.evidence)||void 0===n?void 0:n.related_areas)&&a.evidence.related_areas.length>0){let e=a.evidence.related_areas[0].file_id,i=x.files.findIndex(i=>i.file_id===e);-1!==i&&q(i)}},ev=(e,i,n,d,a)=>{let[c,f,l,o]=n;return e>=c*d&&e<=l*d&&i>=f*a&&i<=o*a},ey=e=>{k(w.map(i=>{if(i.id===p&&m){var n;let d=i[m];if(null==d?void 0:null===(n=d.evidence)||void 0===n?void 0:n.related_areas){let n=d.evidence.related_areas.filter((i,n)=>ep.indexOf(d.evidence.related_areas[n])!==e);return{...i,[m]:{...d,evidence:{...d.evidence,related_areas:n}}}}}return i})),S>=e&&S>0&&M(S-1)},ej=()=>{Q&&"add"===ef&&el("edit"),$(!1),K(null)};(0,s.useEffect)(()=>{if(!ea.current||!ec.current)return;let e=ec.current,i=e.getContext("2d");if(!i)return;let n=ea.current;if(!n.complete||0===n.naturalWidth)return;e.width=n.naturalWidth,e.height=n.naturalHeight,i.clearRect(0,0,e.width,e.height);let d=x.files[ee].file_id;L&&w.filter(e=>"confirmed"===e.user_status).forEach(n=>{["name","part_number","quantity","unit"].forEach(a=>{var c;let f=n[a];(null==f?void 0:null===(c=f.evidence)||void 0===c?void 0:c.related_areas)&&f.evidence.related_areas.filter(e=>e.file_id===d).forEach(n=>{let[d,a,c,f]=n.bbox,l=d*e.width,o=a*e.height,t=c*e.width,r=f*e.height;i.strokeStyle="#9CA3AF",i.lineWidth=2,i.strokeRect(l,o,t-l,r-o),i.fillStyle="rgba(156, 163, 175, 0.1)",i.fillRect(l,o,t-l,r-o)})})}),en&&D.evidence[en].filter(e=>e.file_id===d).forEach((n,d)=>{let[a,c,f,l]=n.bbox,o=a*e.width,t=c*e.height,r=f*e.width,b=l*e.height,s=D.evidence[en].indexOf(n),x=s===B,g=x?"#3B82F6":"#10B981";i.strokeStyle=g,i.lineWidth=x?5:3,i.strokeRect(o,t,r-o,b-t),i.fillStyle=x?"rgba(59, 130, 246, 0.25)":"rgba(16, 185, 129, 0.15)",i.fillRect(o,t,r-o,b-t),i.fillStyle=g,i.font="bold 24px sans-serif",i.fillText((s+1).toString(),o+10,t+30)})},[en,D.evidence,ee,B,L,w,T]);let eN=()=>{Q&&"add"===Z&&E("edit"),$(!1),K(null)};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)("header",{className:"bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50 shadow-sm",children:(0,d.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(a.default,{href:"/bom",className:"text-gray-600 hover:text-gray-900 transition-colors",children:(0,d.jsx)(c.Z,{className:"w-6 h-6"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:x.title}),(0,d.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,d.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(es[x.status].class),children:es[x.status].label}),(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[new Date(x.created_at).toLocaleString("ja-JP"),"に作成"]}),(()=>{let e=w.filter(e=>"confirmed"===e.user_status).length,i=w.length,n=i>0?Math.round(e/i*100):0;return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["進捗: ",e,"/",i]}),(0,d.jsx)("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,d.jsx)("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:"".concat(n,"%")}})}),(0,d.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[n,"%"]})]})})()]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-button font-medium hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(f.Z,{className:"w-4 h-4"}),"CSVダウンロード"]}),(0,d.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-button font-medium hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(l.Z,{className:"w-4 h-4"}),"再処理"]}),(0,d.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-red-300 text-red-700 rounded-button font-medium hover:bg-red-50 transition-colors",children:[(0,d.jsx)(o.Z,{className:"w-4 h-4"}),"削除"]})]})]})})}),(0,d.jsx)("main",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 pt-32",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"BOM一覧"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("select",{value:er,onChange:e=>eb(Number(e.target.value)),className:"px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,d.jsx)("option",{value:80,children:"80%"}),(0,d.jsx)("option",{value:85,children:"85%"}),(0,d.jsx)("option",{value:90,children:"90%"}),(0,d.jsx)("option",{value:95,children:"95%"})]}),(0,d.jsxs)("button",{onClick:()=>{if(90===er){let e=w.filter(e=>"confirmed"!==e.user_status),i=Math.floor(.92*w.length),n=new Set([...e].sort(()=>Math.random()-.5).slice(0,i).map(e=>e.id));k(w.map(e=>n.has(e.id)?{...e,user_status:"confirmed"}:e))}else k(w.map(e=>{if("AI"===e.source&&"confirmed"!==e.user_status){let i=[];if(["name","part_number","quantity","unit"].forEach(n=>{var d;let a=e[n];(null==a?void 0:null===(d=a.evidence)||void 0===d?void 0:d.related_areas)&&a.evidence.related_areas.forEach(e=>{e.confidence&&i.push(e.confidence)})}),(i.length>0?Math.min(...i):0)>=er/100)return{...e,user_status:"confirmed"}}return e}))},className:"flex items-center gap-2 px-3 py-1.5 bg-green-600 text-white rounded-button text-sm font-medium hover:bg-green-700 transition-colors",children:["AI信頼度",er,"%以上一括確認"]}),(0,d.jsxs)("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-primary text-white rounded-button text-sm font-medium hover:bg-blue-700 transition-colors",children:[(0,d.jsx)(t.Z,{className:"w-4 h-4"}),"手動追加"]})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"関連ファイル"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:x.files.map(e=>(0,d.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 rounded",children:e.filename},e.file_id))})]}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"品名"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"品番"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"数量"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"単位"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"ステータス"})]})}),(0,d.jsx)("tbody",{children:w.map(e=>(0,d.jsxs)("tr",{className:"border-b border-gray-100 ".concat(p===e.id?"bg-blue-50":""),children:[(0,d.jsx)("td",{className:"px-2 py-1",onClick:()=>{_(e.id),eh("name",e.id)},children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"text",value:e.name.value,onChange:i=>em(e.id,"name",i.target.value),onClick:e=>e.stopPropagation(),onFocus:()=>{_(e.id),eh("name",e.id)},className:"w-full px-2 py-1 border rounded text-sm ".concat(p===e.id&&"name"===m?"border-blue-500 bg-blue-50 font-semibold":"border-transparent hover:border-gray-300"," focus:outline-none focus:border-blue-500 focus:bg-blue-50")}),"manual"===e.source&&(0,d.jsx)("span",{className:"text-xs px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded whitespace-nowrap",children:"手動"})]})}),(0,d.jsx)("td",{className:"px-2 py-1",onClick:()=>{_(e.id),eh("part_number",e.id)},children:(0,d.jsx)("input",{type:"text",value:e.part_number.value,onChange:i=>em(e.id,"part_number",i.target.value),onClick:e=>e.stopPropagation(),onFocus:()=>{_(e.id),eh("part_number",e.id)},className:"w-full px-2 py-1 border rounded text-sm ".concat(p===e.id&&"part_number"===m?"border-blue-500 bg-blue-50 font-semibold":"border-transparent hover:border-gray-300"," focus:outline-none focus:border-blue-500 focus:bg-blue-50")})}),(0,d.jsx)("td",{className:"px-2 py-1",onClick:()=>{_(e.id),eh("quantity",e.id)},children:(0,d.jsx)("input",{type:"text",value:e.quantity.value,onChange:i=>em(e.id,"quantity",i.target.value),onClick:e=>e.stopPropagation(),onFocus:()=>{_(e.id),eh("quantity",e.id)},className:"w-full px-2 py-1 border rounded text-sm ".concat(p===e.id&&"quantity"===m?"border-blue-500 bg-blue-50 font-semibold":"border-transparent hover:border-gray-300"," focus:outline-none focus:border-blue-500 focus:bg-blue-50")})}),(0,d.jsx)("td",{className:"px-3 py-2",children:e.unit.value}),(0,d.jsx)("td",{className:"px-2 py-1",children:(0,d.jsxs)("select",{value:e.user_status||"unconfirmed",onChange:i=>{k(w.map(n=>n.id===e.id?{...n,user_status:i.target.value}:n))},className:"w-full px-2 py-1 text-xs rounded border ".concat(e.user_status?ex[e.user_status].class:"bg-gray-100 text-gray-600"," focus:outline-none focus:ring-2 focus:ring-primary"),children:[(0,d.jsx)("option",{value:"unconfirmed",children:"未確認"}),(0,d.jsx)("option",{value:"confirmed",children:"確認済み"}),(0,d.jsx)("option",{value:"needs_correction",children:"要修正"}),(0,d.jsx)("option",{value:"rejected",children:"却下"})]})})]},e.id))})]})}),(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,d.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"合計アイテム数:"}),(0,d.jsxs)("span",{className:"font-semibold text-gray-900",children:[x.items.length,"件"]})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-card shadow-sm border border-gray-200 p-6 lg:col-span-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"図面プレビュー"}),p&&m&&ep.length>0&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>{if(S>0){let i=S-1;console.log("Prev evidence:",S,"->",i),H(!0),M(i);let n=eu()[i];if(n){var e;console.log("Prev evidence file_id:",n.file_id);let i=x.files.findIndex(e=>e.file_id===n.file_id);console.log("Switching to file index:",i,"file:",null===(e=x.files[i])||void 0===e?void 0:e.filename),-1!==i&&q(i)}}},disabled:0===S,className:"p-1.5 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,d.jsx)(r.Z,{className:"w-4 h-4"})}),(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:[S+1," / ",ep.length]}),(0,d.jsx)("button",{onClick:()=>{let e=eu();if(S<e.length-1){let n=S+1;console.log("Next evidence:",S,"->",n),H(!0),M(n);let d=e[n];if(d){var i;console.log("Next evidence file_id:",d.file_id);let e=x.files.findIndex(e=>e.file_id===d.file_id);console.log("Switching to file index:",e,"file:",null===(i=x.files[e])||void 0===i?void 0:i.filename),-1!==e&&q(e)}}},disabled:S===ep.length-1,className:"p-1.5 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,d.jsx)(b,{className:"w-4 h-4"})})]})]}),p?(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"ファイル選択"}),(0,d.jsx)("select",{value:C,onChange:e=>{let i=parseInt(e.target.value);q(i),H(!0);let n=eu(),d=x.files[i].file_id,a=n.findIndex(e=>e.file_id===d);-1!==a?M(a):M(0)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",children:x.files.map((e,i)=>(0,d.jsx)("option",{value:i,children:e.filename},e.file_id))})]}),(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"編集モード"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>el("add"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("add"===ef?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"➕ 追加"}),(0,d.jsx)("button",{onClick:()=>el("edit"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("edit"===ef?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"✏️ 修正"}),(0,d.jsx)("button",{onClick:()=>el("delete"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("delete"===ef?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDDD1️ 削除"})]})]}),(0,d.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["\uD83D\uDCC4 ",eg.filename]}),(0,d.jsx)("div",{className:"bg-gray-100 rounded mb-4 overflow-hidden relative",children:(0,d.jsxs)("div",{className:"relative",style:{minHeight:"600px"},children:[(0,d.jsx)("img",{ref:X,src:eg.url,alt:"図面プレビュー",className:"w-full h-full object-contain",onLoad:()=>{!F&&m&&p&&eh(m,p)}}),(0,d.jsx)("canvas",{ref:Y,className:"absolute top-0 left-0 w-full h-full cursor-crosshair",style:{objectFit:"contain"},onMouseDown:e=>{if(!Y.current||!p||!m)return;let i=Y.current,n=i.getBoundingClientRect(),d=i.width/n.width,a=i.height/n.height,c=(e.clientX-n.left)*d,f=(e.clientY-n.top)*a,l=ep.filter(e=>e.file_id===eg.file_id),o=-1;for(let e=0;e<l.length;e++)if(ev(c,f,l[e].bbox,i.width,i.height)){o=ep.indexOf(l[e]);break}if(o>=0){if("delete"===ef){ey(o);return}if("edit"===ef){M(o),$(!0);let e=ep[o].bbox;K({x:e[0],y:e[1]});return}}"add"===ef&&($(!0),K({x:c/i.width,y:f/i.height}))},onMouseMove:e=>{let i=Y.current;if(!i||!p||!m)return;let n=i.getBoundingClientRect(),d=i.width/n.width,a=i.height/n.height,c=(e.clientX-n.left)*d,f=(e.clientY-n.top)*a;if(!Q){let e=ep.filter(e=>e.file_id===eg.file_id),n=-1;for(let d=0;d<e.length;d++)if(ev(c,f,e[d].bbox,i.width,i.height)){n=ep.indexOf(e[d]);break}et(n)}if(!Q||!J)return;let l=c/i.width,o=f/i.height;k(w.map(e=>{if(e.id===p){var i;let n=e[m];if(null==n?void 0:null===(i=n.evidence)||void 0===i?void 0:i.related_areas){let i=[...n.evidence.related_areas],d=[Math.min(J.x,l),Math.min(J.y,o),Math.max(J.x,l),Math.max(J.y,o)];if("add"===ef){let e=i.findIndex(e=>e.file_id===eg.file_id&&e.bbox[0]===J.x&&e.bbox[1]===J.y);e>=0?i[e]={...i[e],bbox:d}:i.push({file_id:eg.file_id,page:1,bbox:d})}else i[S]={...i[S],bbox:d};return{...e,[m]:{...n,evidence:{...n.evidence,related_areas:i}}}}}return e}))},onMouseUp:ej,onMouseLeave:ej})]})}),p&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"フィールドを選択"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:["name","part_number","quantity","unit"].map(e=>{var i,n;let a=w.find(e=>e.id===p),c=null==a?void 0:a[e],f=(null==c?void 0:null===(n=c.evidence)||void 0===n?void 0:null===(i=n.related_areas)||void 0===i?void 0:i.length)>0;return(0,d.jsxs)("button",{onClick:()=>eh(e,p),disabled:!f,className:"px-3 py-1.5 text-sm rounded transition-colors ".concat(m===e?"bg-blue-600 text-white":f?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:[{name:"品名",part_number:"品番",quantity:"数量",unit:"単位"}[e],f&&(0,d.jsxs)("span",{className:"ml-1",children:["(",c.evidence.related_areas.length,")"]})]},e)})})]}),m&&e_&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["エビデンス詳細 (",S+1,"/",ep.length,")"]}),(0,d.jsxs)("div",{className:"p-3 bg-blue-50 rounded text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,d.jsx)("span",{className:"font-medium text-gray-700",children:null===(i=x.files.find(e=>e.file_id===e_.file_id))||void 0===i?void 0:i.filename}),(0,d.jsxs)("span",{className:"text-gray-600",children:["ページ ",e_.page]})]}),(0,d.jsxs)("div",{className:"text-xs text-gray-600",children:["座標: [",e_.bbox.map(e=>e.toFixed(3)).join(", "),"]"]}),e_.confidence&&(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"AI信頼度:"}),(0,d.jsxs)("span",{className:"font-semibold ".concat(e_.confidence>=.9?"text-green-600":e_.confidence>=.8?"text-amber-600":"text-red-600"),children:[(100*e_.confidence).toFixed(1),"%"]})]}),(0,d.jsx)("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"h-2 rounded-full ".concat(e_.confidence>=.9?"bg-green-500":e_.confidence>=.8?"bg-amber-500":"bg-red-500"),style:{width:"".concat(100*e_.confidence,"%")}})})]}),(()=>{var e;let i=w.find(e=>e.id===p),n=null==i?void 0:i[m];return(null==n?void 0:null===(e=n.evidence)||void 0===e?void 0:e.comment)&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-gray-700",children:["\uD83D\uDCAC ",n.evidence.comment]})})()]})]}),(null===(n=w.find(e=>e.id===p))||void 0===n?void 0:n.user_comment)&&(0,d.jsxs)("div",{className:"p-3 bg-amber-50 rounded text-sm mt-3",children:[(0,d.jsx)("div",{className:"font-medium text-gray-700 mb-1",children:"ユーザーコメント"}),(0,d.jsx)("div",{className:"text-gray-700",children:null===(g=w.find(e=>e.id===p))||void 0===g?void 0:g.user_comment})]})]}):(0,d.jsx)("div",{className:"bg-gray-50 rounded aspect-[4/3] flex items-center justify-center",children:(0,d.jsx)("p",{className:"text-gray-500 text-sm",children:"左側の表からアイテムを選択してください"})})]})]})}),A&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 w-[95vw] max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"アイテムを手動追加"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["品名 ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:D.name,onChange:e=>R({...D,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"例: ボルト"}),D.evidence.name.length>0&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-green-600",children:["✓ エビデンス設定済み (",D.evidence.name.length,"箇所)"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["品番 ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:D.part_number,onChange:e=>R({...D,part_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"例: M6-20"}),D.evidence.part_number.length>0&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-green-600",children:["✓ エビデンス設定済み (",D.evidence.part_number.length,"箇所)"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["数量 ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsx)("input",{type:"text",value:D.quantity,onChange:e=>R({...D,quantity:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"例: 10"}),(0,d.jsx)("input",{type:"text",value:D.unit,onChange:e=>R({...D,unit:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"単位: 個"})]}),D.evidence.quantity.length>0&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-green-600",children:["✓ エビデンス設定済み (",D.evidence.quantity.length,"箇所)"]}),D.evidence.unit.length>0&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-green-600",children:["✓ 単位エビデンス設定済み (",D.evidence.unit.length,"箇所)"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"図面プレビュー"}),(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)("select",{value:ee,onChange:e=>{ei(parseInt(e.target.value)),W(!1)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",children:x.files.map((e,i)=>(0,d.jsx)("option",{value:i,children:e.filename},e.file_id))})}),(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"編集モード"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>E("add"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("add"===Z?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"➕ 追加"}),(0,d.jsx)("button",{onClick:()=>E("edit"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("edit"===Z?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"✏️ 修正"}),(0,d.jsx)("button",{onClick:()=>E("delete"),className:"flex-1 px-3 py-1.5 text-sm rounded transition-colors ".concat("delete"===Z?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDDD1️ 削除"})]})]}),(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"エビデンスを設定するフィールドを選択"}),(0,d.jsx)("div",{className:"flex gap-2 flex-wrap",children:["name","part_number","quantity","unit"].map(e=>{let i=D.evidence[e].length;return(0,d.jsxs)("button",{onClick:()=>{ed(e),P(null)},className:"px-3 py-1.5 text-sm rounded transition-colors ".concat(en===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[{name:"品名",part_number:"品番",quantity:"数量",unit:"単位"}[e],i>0&&(0,d.jsxs)("span",{className:"ml-1",children:["(",i,")"]})]},e)})})]}),(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)("button",{onClick:()=>O(!L),className:"w-full px-3 py-2 text-sm rounded transition-colors ".concat(L?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:L?"✓ 確定済みボックスを表示中":"確定済みボックスを全て表示"})}),(0,d.jsx)("div",{className:"bg-gray-100 rounded overflow-hidden relative border-2 border-gray-300",children:(0,d.jsxs)("div",{className:"relative",style:{minHeight:"400px"},children:[(0,d.jsx)("img",{ref:ea,src:x.files[ee].url,alt:"図面プレビュー",className:"w-full h-full object-contain",onLoad:()=>{W(!0)}}),(0,d.jsx)("canvas",{ref:ec,className:"absolute top-0 left-0 w-full h-full cursor-crosshair",style:{objectFit:"contain"},onMouseDown:e=>{if(!ec.current||!en)return;let i=ec.current,n=i.getBoundingClientRect(),d=i.width/n.width,a=i.height/n.height,c=(e.clientX-n.left)*d,f=(e.clientY-n.top)*a,l=x.files[ee].file_id,o=D.evidence[en],t=-1;for(let e=0;e<o.length;e++)if(o[e].file_id===l&&ev(c,f,o[e].bbox,i.width,i.height)){t=e;break}if(t>=0){if("delete"===Z){R({...D,evidence:{...D.evidence,[en]:o.filter((e,i)=>i!==t)}});return}if("edit"===Z){P(t),$(!0);let e=o[t].bbox;K({x:e[0],y:e[1]});return}}"add"===Z&&($(!0),K({x:c/i.width,y:f/i.height}))},onMouseMove:e=>{if(!Q||!ec.current||!J||!en)return;let i=ec.current,n=i.getBoundingClientRect(),d=i.width/n.width,a=i.height/n.height,c=(e.clientX-n.left)*d,f=(e.clientY-n.top)*a,l=c/i.width,o=f/i.height,t=[Math.min(J.x,l),Math.min(J.y,o),Math.max(J.x,l),Math.max(J.y,o)],r=x.files[ee].file_id,b=[...D.evidence[en]];if("edit"===Z&&null!==B)b[B]={file_id:r,bbox:t};else if("add"===Z){let e=b.findIndex(e=>e.file_id===r&&e.bbox[0]===J.x&&e.bbox[1]===J.y);e>=0?b[e]={file_id:r,bbox:t}:b.push({file_id:r,bbox:t})}R({...D,evidence:{...D.evidence,[en]:b}})},onMouseUp:eN,onMouseLeave:eN})]})}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\uD83D\uDCA1 フィールドを選択してから、図面上でドラッグしてバウンディングボックスを描画してください"})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,d.jsx)("button",{onClick:()=>{I(!1),ed(null),ei(0),E("add"),P(null),R({name:"",part_number:"",quantity:"",unit:"個",evidence:{name:[],part_number:[],quantity:[],unit:[]}})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-button font-medium hover:bg-gray-50 transition-colors",children:"キャンセル"}),(0,d.jsx)("button",{onClick:()=>{let e=(Math.max(...w.map(e=>parseInt(e.id)))+1).toString(),i=(e,i)=>({value:e,evidence:{related_areas:D.evidence[i].map(e=>({file_id:e.file_id,page:1,bbox:e.bbox,confidence:1}))}});k([...w,{id:e,name:i(D.name,"name"),part_number:i(D.part_number,"part_number"),quantity:i(D.quantity,"quantity"),unit:i(D.unit,"unit"),source:"manual",user_status:"confirmed"}]),I(!1),R({name:"",part_number:"",quantity:"",unit:"個",evidence:{name:[],part_number:[],quantity:[],unit:[]}}),E("add"),P(null)},disabled:!D.name||!D.part_number||!D.quantity,className:"px-4 py-2 bg-primary text-white rounded-button font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"追加"})]})]})})]})}},2660:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2451:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2735:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9397:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7168:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8930:function(e,i,n){"use strict";n.d(i,{Z:function(){return d}});let d=(0,n(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=4835)}),_N_E=e.O()}]);